var n=window.location.hostname==="localhost"?"http://localhost:3000":"https://librairie-simple-production-6ca3.up.railway.app",a=n;var s=document.querySelector("form");s.addEventListener("submit",async r=>{r.preventDefault();let e=document.querySelector("#username").value.trim(),o=document.querySelector("#password").value.trim();if(!e||!o){alert("Champ requis");return}let t={username:e,password:o};console.log("Payload de connexion :",t),await l(t)});async function l(r){try{let e=await fetch(`${a}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw new Error(o.message||"Erreur API");let o=await e.json();console.log("R\xE9ponse du serveur :",o),alert("Connexion r\xE9ussie ! Vous pouvez maintenant acc\xE9der \xE0 l'application."),localStorage.setItem("userId",o.user.id),localStorage.setItem("username",o.user.username),localStorage.setItem("role",o.user.role),window.location.href="/"}catch(e){console.error("Erreur lors de l'envoie des donn\xE9es :",e),alert(`Erreur: ${e.message}`)}}
